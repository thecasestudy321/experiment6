webpackJsonp([229],{362:function(e,t,r){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(r(589));nb.substance0064=extendsClass(ScienceMain,{frame0:function(){var e=this,t=[e.t0,e.t1,e.t2,e.t3,e.t4,e.t5,e.t6,e.t7],r=[e.s0,e.s1,e.s2,e.s3,e.s4,e.s5,e.s6,e.s7],a=[e.b0,e.b1,e.b2,e.b3,e.b4,e.b5,e.b6,e.b7],n=0;function i(){instance.NBDownTip.hideTip(),this.startX=this.x,this.startY=this.y,e.setChildIndex(this,e.children.length-1)}function o(){var a=t.indexOf(this);this.hitTest(e.tAll)?(r[n].currentFrame=a,TweenMax.to(r[n],.4,{alpha:0})):TweenMax.to(r[n],.4,{alpha:0})}!function(){instance.NBDownTip.showTip("预测下沉物体拖入虚线框中"),r.forEach(function(e){e.alpha=0}),a.forEach(function(e){e.alpha=0});var e=!0,n=!1,h=void 0;try{for(var c,l=r[Symbol.iterator]();!(e=(c=l.next()).done);e=!0){var d=c.value;d.interactive=!1}}catch(e){n=!0,h=e}finally{try{!e&&l.return&&l.return()}finally{if(n)throw h}}t.forEach(function(e){NBDrag.addDrag(e),e.addEventListener(NBDrag.event.START_DRAG,i),e.addEventListener(NBDrag.event.DRAG_MOVE,o),e.addEventListener(NBDrag.event.STOP_DRAG,s)}),t.forEach(function(e,t){a[t].x=e.x-a[t].width/2,a[t].y=e.y-a[t].height/2})}();var h=!0;function s(){var i=this;if(this.hitTest(e.tAll)){n++,this.alpha=0;var o=!0,s=!0,c=!1,l=void 0;try{for(var d,f=r[Symbol.iterator]();!(s=(d=f.next()).done);s=!0){var y=d.value;if(1===y.alpha&&this.hitTest(y))if("break"===function(){var r=t[y.currentFrame].clone();r.name=t[y.currentFrame].name,r.x=i.x,r.y=i.y,r.currentFrame=y.currentFrame,e.addChild(r),TweenMax.to(r,.4,{x:t[y.currentFrame].x,y:t[y.currentFrame].y,alpha:0,onComplete:function(){e.removeChild(r)}});var h=y.currentFrame;return o=!1,y.currentFrame=t.indexOf(i),TweenMax.to(t[h],.4,{alpha:1}),TweenMax.to(a[h],.4,{alpha:0,onComplete:function(){t[h].interactive=!0}}),i.x=i.startX,i.y=i.startY,TweenMax.to(i,.4,{alpha:.4}),TweenMax.to(a[t.indexOf(i)],.4,{alpha:1,onComplete:function(){i.interactive=!1}}),n--,"break"}())break}}catch(e){c=!0,l=e}finally{try{!s&&f.return&&f.return()}finally{if(c)throw l}}o&&TweenMax.to(r[n-1],.4,{alpha:1,onComplete:function(){TweenMax.to(a[t.indexOf(i)],.4,{alpha:1}),TweenMax.to(i,.4,{alpha:.4}),i.interactive=!1}});var u=e["s"+(n-1)];u.interactive=!0,NBDrag.addDrag(u);var x=void 0;u.addEventListener(NBDrag.event.START_DRAG,function(){u.startX=u.x,u.startY=u.y,e.setChildIndex(i,e.children.length-1);var t=!0,a=!1,n=void 0;try{for(var o,h=r[Symbol.iterator]();!(t=(o=h.next()).done);t=!0){var s=o.value;1===s.alpha&&(x=s)}}catch(e){a=!0,n=e}finally{try{!t&&h.return&&h.return()}finally{if(a)throw n}}x.comeBackX=x.x,x.comeBackY=x.y}),u.addEventListener(NBDrag.event.STOP_DRAG,function(){if(u.hitTest(e.tAll)){var i=!0,o=void 0,h=!0,s=!1,c=void 0;try{for(var l,d=r[Symbol.iterator]();!(h=(l=d.next()).done);h=!0){var f=l.value;if(1===f.alpha&&u.hitTest(f)&&u!=f){var y=!0,v=!1,b=void 0;try{for(var p,m=r[Symbol.iterator]();!(y=(p=m.next()).done);y=!0){p.value.interactive=!1}}catch(e){v=!0,b=e}finally{try{!y&&m.return&&m.return()}finally{if(v)throw b}}i=!1,o=f;var w=f.x,T=f.y;TweenMax.to(u,.4,{x:w,y:T}),TweenMax.to(f,.4,{x:u.startX,y:u.startY,onComplete:function(){var e=!0,t=!1,a=void 0;try{for(var n,i=r[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var o=n.value;1===o.alpha&&(o.interactive=!0)}}catch(e){t=!0,a=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw a}}}});break}}}catch(e){s=!0,c=e}finally{try{!h&&d.return&&d.return()}finally{if(s)throw c}}var B=r.indexOf(o),A=r.indexOf(u);-1!=B&&-1!=A&&(r[B]=u,r[A]=o),i&&TweenMax.to(u,.4,{x:u.startX,y:u.startY})}else{TweenMax.to(x,.4,{x:u.startX,y:u.startY}),TweenMax.to(u,.4,{alpha:0,x:t[u.currentFrame].x,y:t[u.currentFrame].y,onComplete:function(){u.x=x.comeBackX,u.y=x.comeBackY;var e=!0,i=!1,o=void 0;try{for(var h,s=r[Symbol.iterator]();!(e=(h=s.next()).done);e=!0){h.value.interactive=!1}}catch(e){i=!0,o=e}finally{try{!e&&s.return&&s.return()}finally{if(i)throw o}}TweenMax.to(a[u.currentFrame],.4,{alpha:0}),TweenMax.to(t[u.currentFrame],.4,{alpha:1,onComplete:function(){t[u.currentFrame].interactive=!0;var e=!0,a=!1,i=void 0;try{for(var o,h=r[Symbol.iterator]();!(e=(o=h.next()).done);e=!0){var s=o.value;1===s.alpha&&(s.interactive=!0)}}catch(e){a=!0,i=e}finally{try{!e&&h.return&&h.return()}finally{if(a)throw i}}n--}})}});var S=r.indexOf(x),g=r.indexOf(u);r[S]=u,r[g]=x}}),h=!1}else h&&instance.NBDownTip.showTip("将可能被吸引的物体拖动到虚框内");TweenMax.to(this,.4,{x:this.startX,y:this.startY})}this.onUpdate=function(){instance.info.choiceArr=[],a.forEach(function(e,t){e.alpha>0&&-1===instance.info.choiceArr.indexOf(t)&&instance.info.choiceArr.push(t)})}},frame1:function(){var e=this,t=new nb.Box2d(this);function r(t){[e.b0,e.b6,e.b2,e.b4,e.b7,e.b1,e.b3,e.b5].forEach(function(e,r){-1===instance.info.choiceArr.indexOf(r)?t?TweenMax.to(e,.4,{alpha:0}):e.alpha=0:TweenMax.to(e,.4,{alpha:1})})}instance.NBDownTip.showTip("将物体拖入水槽进行验证"),this.onUpdate=function(){t.render()},a.default.apply(this,[t]),$(".steps li").click(function(){r(!0)}),r();var n=[e.a0,e.a1,e.a2,e.a3,e.a4,e.a5,e.a6,e.a7],i=[e.b0,e.b1,e.b2,e.b3,e.b4,e.b5,e.b6,e.b7];n.forEach(function(e,t){i[t].x=e.x-i[t].width/2,i[t].y=e.y-i[t].height/2})},start:function(){this.menu.addStepFromObj(this.info),this.menu.setExperimentName(this.info.labName),this.bindScriptToSprite(this.frame1,"frame1"),this.bindScriptToSprite(this.frame0,"frame0")},info:{experimentImport:"将不同的物体放入水中，观察不同的物体在水中的沉浮状态。",labName:"不同物体的沉浮",title0:"预测物体",title1:"验证物体",CONCLUSION:"不同材料的物体，在水中的沉浮情况不同。",choiseArr:[]},const:{},event:{}}),e.exports=nb.substance0064},589:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){console.log(this,this.name);for(var t=this,r=function(r){if("begin"===r.type){t.setChildIndex(this,t.children.length-1),t.followName0&&t.setChildIndex(t["followName"+this.name.substr(1,1)],t.children.length-1),this.b2Body.SetType(e.b2Body.b2_kinematicBody),nb.Box2d.freezeBody(this.b2Body),TweenMax.killTweensOf(this),this.b2Body.GetFixtureList().SetSensor(!0);var a=this.x>t.centerArea.x-t.centerArea.width/2&&this.x<t.centerArea.x+t.centerArea.width/2&&this.y>t.centerArea.y-t.centerArea.height/2-this.height/2&&this.y<t.centerArea.y+t.centerArea.height/2;instance.NBDownTip.hideTip(),instance.NBDownTipsError.hideTip(),a?(this.startPos=!0,this.b2Body.GetFixtureList().SetSensor(!1)):this.startPos=!1}else if("move"===r.type){var n=r.offsetX/e.b2Scale,i=r.offsetY/e.b2Scale;nb.Box2d.appendPos(this,n,i)}else if("end"===r.type)if(this.hitTest(t.kinematicRect))this.b2Body.GetFixtureList().SetSensor(!1),this.b2Body.SetType(e.b2Body.b2_dynamicBody),this.emit("reachRect"),t.setChildIndex(this,0);else{if(this.x>t.centerArea.x-t.centerArea.width/2&&this.x<t.centerArea.x+t.centerArea.width/2&&this.y>t.centerArea.y-t.centerArea.height/2&&this.y<t.centerArea.y+t.centerArea.height/2&&this.startPos)return this.b2Body.GetFixtureList().SetSensor(!1),this.b2Body.SetType(e.b2Body.b2_dynamicBody),void t.setChildIndex(this,0);this.b2Body.SetType(e.b2Body.b2_kinematicBody),nb.Box2d.freezeBody(this.b2Body),this.emit("comeBackChange");var o=this,h=TweenMax.to(this,.5,{onUpdate:function(e,t,r,a){var n=h.ratio;nb.Box2d.updatePos(e,t+(e.b2Dx-t)*n,r+(e.b2Dy-r)*n,a+(0-a)*n)},onUpdateParams:[this,this.x/e.b2Scale,this.y/e.b2Scale,this.rotation],ease:Back.easeOut,onComplete:function(){o.emit("noReach_comeBack")}});if(t.centerArea)t.centerArea.visible=!0,this.x>t.centerArea.x-t.centerArea.width/2-this.width/2&&this.x<t.centerArea.x+t.centerArea.width/2+this.width/2&&this.y>t.centerArea.y-t.centerArea.height/2-this.height/2&&this.y<t.centerArea.y+t.centerArea.height/2+this.height/2?instance.NBDownTipsError.showTip("请从水槽上方放入物体"):instance.NBDownTip.showTip("请从水槽上方放入物体")}},a=0;a<int.MAX_VALUE;a++){var n=this["a"+a];if(void 0===n)break;NBGesture.addGesture(n,NBGesture.gesture.PAN,r);var i=n.b2Body.GetPosition();n.b2Dx=i.x,n.b2Dy=i.y}}}});