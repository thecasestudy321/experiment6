webpackJsonp([233],{374:function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(527));nb.substance0207=extendsClass(ScienceMain,{frame0:function(){var e=this,t=e.bottom,n=e.glassMask,i=e.glass;instance.viewStack.NBONOFF.visible=!1,t.mask=n.children[0],a.default.apply(e,[i,{bigPng:"bigPng",littlePng:"sPng",tipOffsetX:-140,tipOffsetY:100,iconOffsetX:-155,iconOffsetY:100}]),i.addEventListener(NBDrag.event.DRAG_MOVE,function(){e.bottom.hitTest(e.txt)?e.txt.visible=!1:e.txt.visible=!0})},start:function(){this.menu.addStepFromObj(this.info),this.menu.setExperimentName(this.info.labName),this.bindScriptToSprite(this.frame0,"frame0")},info:{experimentImport:"肉眼观察和放大镜观察到底有什么不同？放大镜还能发现什么？",labName:"放大镜新视界",CONCLUSION:"放大镜不仅能把图像放大, 还能看到物体的更多细节。",newLayOut:!0,bgColor:"#F3E6CF"},const:{MAX_SCALE:1.6,MIN_SCALE:.82,START_BLUR:.5,BLUR:7.8},event:{}}),e.exports=nb.substance0207},527:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=this,a=e,i=Object.assign({},{littlePng:"lPng",bigPng:"bPng",MAX_SCALE:1.6,MIN_SCALE:.82,START_BLUR:.5,BLUR:7.8,tipOffsetX:0,tipOffsetY:0,iconOffsetX:0,iconOffsetY:0,slideY:70},t),s=a.tipIcon,o=a.littleTip;s.y=-206+i.iconOffsetY,s.x=289+i.iconOffsetX,o.x=257+i.tipOffsetX,o.y=-100+i.tipOffsetY,s.startPos={x:s.x,y:s.y},o.startPos={x:o.x,y:o.y},o.alpha=0,NBDrag.addDrag(a);var c=TweenMax.to(s.scale,.5,{x:1.2,y:1.2,repeat:-1,yoyo:!0});a.addEventListener(NBDrag.event.START_DRAG,l),a.addEventListener(NBDrag.event.DRAG_MOVE,h);var r=!1;function l(e){a.tapPoint&&e&&a.removeChild(a.tapPoint),TweenMax.killTweensOf(o),o.alpha&&TweenMax.to(o,.5,{y:o.startPos.y,ease:Power2.easeOut,alpha:0,onComplete:function(){}}),TweenMax.to(o,.5,{onComplete:function(){r=!1}})}s.addEventListener(TouchEvent.TAP,function(){r||(r=!0,c.pause(),o.alpha||(TweenMax.killTweensOf(o),TweenMax.to(o,.5,{y:o.startPos.y-i.slideY,ease:Power2.easeOut,alpha:1,onStart:function(){o.y=o.startPos.y,r=!1}})))}),$("canvas").click(function(){r||(r=!0,l())});var f=new PIXI.Graphics;n.addChild(f),n.graphics=f,f.beginFill(0,255,1),f.drawCircle(0,0,n.bottom.width/2);for(var d=[],u=[],v=[],E=0;E<int.MAX_VALUE&&n[i.bigPng+E];E++){var x,T=n[i.bigPng+E],p=n[i.littlePng+E];u.push(T),v.push(p),T.mask=f,T.alpha=1,x=T.width/p.width,d.push(x)}function h(){f.x=a.x,f.y=a.y,n.bottom.position=f.position,v.forEach(function(e,t){var s=n[i.bigPng+t];s.x=-(d[t]-1)*(a.x-e.x)+e.x,s.y=-(d[t]-1)*(a.y-e.y)+e.y})}var M=new PIXI.filters.BlurFilter;function C(e){M.blur=5.46*e-4.4784,M.blur<=0&&(M.blur=0)}function L(e){var t=n.toLocal({x:e.data.global.x,y:e.data.global.y});if(a.glassCenterPoint&&a.removeChild(a.glassCenterPoint),a.arrow.alpha=0,a.slide=!0,instance.NBDownTip.hideTip(),t.x<O){var i=O-t.x;y=A+i/1e3,g=S+i/1e3/2,(b=_+i/1e3)>instance.const.MAX_SCALE&&(b=instance.const.MAX_SCALE),g>instance.const.MAX_SCALE-.5&&(g=instance.const.MAX_SCALE-.5),y>instance.const.MAX_SCALE&&(y=instance.const.MAX_SCALE),C(b),TweenMax.to(a.scale,.5,{x:b,y:y}),TweenMax.to(f.scale,.5,{x:b,y:y}),TweenMax.to(n.bottom.scale,.5,{x:b,y:y}),u.forEach(function(e){TweenMax.to(e.scale,.5,{x:g,y:g}),e.filters=[M]})}if(t.x>O){var s=t.x-O;y=A-s/1e3,g=S-s/1e3/2,(b=_-s/1e3)<instance.const.MIN_SCALE&&(b=instance.const.MIN_SCALE),g<instance.const.MIN_SCALE&&(g=instance.const.MIN_SCALE),y<instance.const.MIN_SCALE&&(y=instance.const.MIN_SCALE),C(b),TweenMax.to(a.scale,.5,{x:b,y:y}),TweenMax.to(f.scale,.5,{x:b,y:y}),TweenMax.to(n.bottom.scale,.5,{x:b,y:y}),u.forEach(function(e){TweenMax.to(e.scale,.5,{x:g,y:g})})}}if(C(1),f){var O,g,b=0,y=0,_=1,A=1,S=1;f.addEventListener(TouchEvent.TOUCH_BEGIN,function(){f.addEventListener(TouchEvent.TOUCH_MOVE,L)}),f.addEventListener(TouchEvent.TOUCH_END,function(){0!=b&&(_=b,A=y,S=g),n.addChild(f),f.removeListener(TouchEvent.TOUCH_MOVE,L)}),f.addEventListener(TouchEvent.TOUCH_END_OUDSIDE,function(){0!=b&&(_=b,A=y,S=g),n.addChild(f),f.removeListener(TouchEvent.TOUCH_MOVE,L)}),f.addEventListener(TouchEvent.TOUCH_BEGIN,function(e){var t=n.toLocal({x:e.data.global.x,y:e.data.global.y});O=t.x,f.addEventListener(TouchEvent.TOUCH_MOVE,L)})}a.addEventListener("canSlide",function(){f.interactive=!0}),a.addEventListener("noSlide",function(){f.interactive=!1}),f.interactive=!1,h(),a.event={grpInteractive:"canSlide",grpNoInteractive:"noSlide"}}}});