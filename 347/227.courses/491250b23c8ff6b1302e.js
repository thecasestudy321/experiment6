webpackJsonp([227],{248:function(e,t,r){"use strict";(function(t){var i=function(e){return e&&e.__esModule?e:{default:e}}(r(538));nb.substance0067=extendsClass(ScienceMain,{frame0:function(){var e=this,t=[e.t0,e.t1,e.t2,e.t3,e.t4],r=[e.s0,e.s1,e.s2,e.s3,e.s4],i=[e.b0,e.b1,e.b2,e.b3,e.b4],n=0;function a(){instance.NBDownTip.hideTip(),this.startX=this.x,this.startY=this.y,e.setChildIndex(this,e.children.length-1)}function o(){var i=t.indexOf(this);this.hitTest(e.tAll)?(r[n].currentFrame=i,TweenMax.to(r[n],.4,{alpha:0})):TweenMax.to(r[n],.4,{alpha:0})}!function(){instance.NBDownTip.showTip("预测下沉物体拖入虚线框中"),r.forEach(function(e){e.alpha=0}),i.forEach(function(e){e.alpha=0});var e=!0,n=!1,s=void 0;try{for(var c,l=r[Symbol.iterator]();!(e=(c=l.next()).done);e=!0){var d=c.value;d.interactive=!1}}catch(e){n=!0,s=e}finally{try{!e&&l.return&&l.return()}finally{if(n)throw s}}t.forEach(function(e){NBDrag.addDrag(e),e.addEventListener(NBDrag.event.START_DRAG,a),e.addEventListener(NBDrag.event.DRAG_MOVE,o),e.addEventListener(NBDrag.event.STOP_DRAG,h)})}();var s=!0;function h(){var a=this;if(this.hitTest(e.tAll)){n++,this.alpha=0;var o=!0,h=!0,c=!1,l=void 0;try{for(var d,f=r[Symbol.iterator]();!(h=(d=f.next()).done);h=!0){var y=d.value;if(1===y.alpha&&this.hitTest(y))if("break"===function(){var r=t[y.currentFrame].clone();r.name=t[y.currentFrame].name,r.x=a.x,r.y=a.y,r.currentFrame=y.currentFrame,e.addChild(r),TweenMax.to(r,.4,{x:t[y.currentFrame].x,y:t[y.currentFrame].y,alpha:0,onComplete:function(){e.removeChild(r)}});var s=y.currentFrame;return o=!1,y.currentFrame=t.indexOf(a),TweenMax.to(t[s],.4,{alpha:1}),TweenMax.to(i[s],.4,{alpha:0,onComplete:function(){t[s].interactive=!0}}),a.x=a.startX,a.y=a.startY,TweenMax.to(a,.4,{alpha:.4}),TweenMax.to(i[t.indexOf(a)],.4,{alpha:1,onComplete:function(){a.interactive=!1}}),n--,"break"}())break}}catch(e){c=!0,l=e}finally{try{!h&&f.return&&f.return()}finally{if(c)throw l}}o&&TweenMax.to(r[n-1],.4,{alpha:1,onComplete:function(){i[t.indexOf(a)].isChoiced=!0,TweenMax.to(a,.4,{alpha:.1}),a.interactive=!1}});var u=e["s"+(n-1)];u.interactive=!0,NBDrag.addDrag(u);var x=void 0;u.addEventListener(NBDrag.event.START_DRAG,function(){u.startX=u.x,u.startY=u.y,e.setChildIndex(a,e.children.length-1);var t=!0,i=!1,n=void 0;try{for(var o,s=r[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var h=o.value;1===h.alpha&&(x=h)}}catch(e){i=!0,n=e}finally{try{!t&&s.return&&s.return()}finally{if(i)throw n}}x.comeBackX=x.x,x.comeBackY=x.y}),u.addEventListener(NBDrag.event.STOP_DRAG,function(){if(u.hitTest(e.tAll)){var a=!0,o=void 0,s=!0,h=!1,c=void 0;try{for(var l,d=r[Symbol.iterator]();!(s=(l=d.next()).done);s=!0){var f=l.value;if(1===f.alpha&&u.hitTest(f)&&u!=f){var y=!0,v=!1,p=void 0;try{for(var m,b=r[Symbol.iterator]();!(y=(m=b.next()).done);y=!0){m.value.interactive=!1}}catch(e){v=!0,p=e}finally{try{!y&&b.return&&b.return()}finally{if(v)throw p}}a=!1,o=f;var w=f.x,T=f.y;TweenMax.to(u,.4,{x:w,y:T}),TweenMax.to(f,.4,{x:u.startX,y:u.startY,onComplete:function(){var e=!0,t=!1,i=void 0;try{for(var n,a=r[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var o=n.value;1===o.alpha&&(o.interactive=!0)}}catch(e){t=!0,i=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw i}}}});break}}}catch(e){h=!0,c=e}finally{try{!s&&d.return&&d.return()}finally{if(h)throw c}}var B=r.indexOf(o),A=r.indexOf(u);-1!=B&&-1!=A&&(r[B]=u,r[A]=o),a&&TweenMax.to(u,.4,{x:u.startX,y:u.startY})}else{TweenMax.to(x,.4,{x:u.startX,y:u.startY}),TweenMax.to(u,.4,{alpha:0,x:t[u.currentFrame].x,y:t[u.currentFrame].y,onComplete:function(){u.x=x.comeBackX,u.y=x.comeBackY;var e=!0,a=!1,o=void 0;try{for(var s,h=r[Symbol.iterator]();!(e=(s=h.next()).done);e=!0){s.value.interactive=!1}}catch(e){a=!0,o=e}finally{try{!e&&h.return&&h.return()}finally{if(a)throw o}}TweenMax.to(i[u.currentFrame],.4,{alpha:0}),i[u.currentFrame].isChoiced=!1,TweenMax.to(t[u.currentFrame],.4,{alpha:1,onComplete:function(){t[u.currentFrame].interactive=!0;var e=!0,i=!1,a=void 0;try{for(var o,s=r[Symbol.iterator]();!(e=(o=s.next()).done);e=!0){var h=o.value;1===h.alpha&&(h.interactive=!0)}}catch(e){i=!0,a=e}finally{try{!e&&s.return&&s.return()}finally{if(i)throw a}}n--}})}});var S=r.indexOf(x),g=r.indexOf(u);r[S]=u,r[g]=x}}),s=!1}else s&&instance.NBDownTip.showTip("将可能被下沉的物体拖动到虚框内");TweenMax.to(this,.4,{x:this.startX,y:this.startY})}this.onUpdate=function(){instance.info.choiceArr=[],i.forEach(function(e,t){e.isChoiced&&-1===instance.info.choiceArr.indexOf(t)&&instance.info.choiceArr.push(t)})}},frame1:function(){var e=this;instance.NBDownTip.showTip("将物体拖入水槽进行验证");var r=new nb.Box2d(this);function n(t){[e.b0,e.b1,e.b2,e.b3,e.b4].forEach(function(e,r){-1===instance.info.choiceArr.indexOf(r)?t?TweenMax.to(e,.4,{alpha:0}):e.alpha=0:TweenMax.to(e,.4,{alpha:1})})}t.box=r,r.DEBUG=!1,this.onUpdate=function(){r.render();for(var t=0;t<5;t++)e["followName"+t].position=e["a"+t].position,e.setChildIndex(e["followName"+t],e.children.length-1);for(var i=0;i<5;i++)if(!1===this["a"+i].hitTest(this.kinematicRect))return;this.onStepComplete()},i.default.apply(this,[r]),$(".steps li").click(function(){n(!0)}),n()},start:function(){this.menu.addStepFromObj(this.info),this.menu.setExperimentName(this.info.labName),this.bindScriptToSprite(this.frame0,"frame0"),this.bindScriptToSprite(this.frame1,"frame1")},info:{experimentImport:"将大小相同的重量不同的小球放入水中，观察物体的沉浮与轻重相关吗？",labName:"轻重对沉浮的影响",title0:"预测物体",title1:"验证物体",CONCLUSION:"相同大小的物体，越重的越容易下沉。",choiseArr:[]},const:{},event:{}}),e.exports=nb.substance0067}).call(t,r(5))},538:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){console.log(this,this.name);for(var t=this,r=function(r){if("begin"===r.type){t.setChildIndex(this,t.children.length-1),t.followName0&&t.setChildIndex(t["followName"+this.name.substr(1,1)],t.children.length-1),this.b2Body.SetType(e.b2Body.b2_kinematicBody),nb.Box2d.freezeBody(this.b2Body),TweenMax.killTweensOf(this),this.b2Body.GetFixtureList().SetSensor(!0);var i=this.x>t.centerArea.x-t.centerArea.width/2&&this.x<t.centerArea.x+t.centerArea.width/2&&this.y>t.centerArea.y-t.centerArea.height/2-this.height/2&&this.y<t.centerArea.y+t.centerArea.height/2;instance.NBDownTip.hideTip(),instance.NBDownTipsError.hideTip(),i?(this.startPos=!0,this.b2Body.GetFixtureList().SetSensor(!1)):this.startPos=!1}else if("move"===r.type){var n=r.offsetX/e.b2Scale,a=r.offsetY/e.b2Scale;nb.Box2d.appendPos(this,n,a)}else if("end"===r.type)if(this.hitTest(t.kinematicRect))this.b2Body.GetFixtureList().SetSensor(!1),this.b2Body.SetType(e.b2Body.b2_dynamicBody),this.emit("reachRect"),t.setChildIndex(this,0);else{if(this.x>t.centerArea.x-t.centerArea.width/2&&this.x<t.centerArea.x+t.centerArea.width/2&&this.y>t.centerArea.y-t.centerArea.height/2&&this.y<t.centerArea.y+t.centerArea.height/2&&this.startPos)return this.b2Body.GetFixtureList().SetSensor(!1),this.b2Body.SetType(e.b2Body.b2_dynamicBody),void t.setChildIndex(this,0);this.b2Body.SetType(e.b2Body.b2_kinematicBody),nb.Box2d.freezeBody(this.b2Body),this.emit("comeBackChange");var o=this,s=TweenMax.to(this,.5,{onUpdate:function(e,t,r,i){var n=s.ratio;nb.Box2d.updatePos(e,t+(e.b2Dx-t)*n,r+(e.b2Dy-r)*n,i+(0-i)*n)},onUpdateParams:[this,this.x/e.b2Scale,this.y/e.b2Scale,this.rotation],ease:Back.easeOut,onComplete:function(){o.emit("noReach_comeBack")}});if(t.centerArea)t.centerArea.visible=!0,this.x>t.centerArea.x-t.centerArea.width/2-this.width/2&&this.x<t.centerArea.x+t.centerArea.width/2+this.width/2&&this.y>t.centerArea.y-t.centerArea.height/2-this.height/2&&this.y<t.centerArea.y+t.centerArea.height/2+this.height/2?instance.NBDownTipsError.showTip("请从水槽上方放入物体"):instance.NBDownTip.showTip("请从水槽上方放入物体")}},i=0;i<int.MAX_VALUE;i++){var n=this["a"+i];if(void 0===n)break;NBGesture.addGesture(n,NBGesture.gesture.PAN,r);var a=n.b2Body.GetPosition();n.b2Dx=a.x,n.b2Dy=a.y}}}});