webpackJsonp([273],{314:function(t,e,a){"use strict";nb.substance0066=extendsClass(ScienceMain,{frame0:function(){instance.NBDownTip.showTip("预测下沉物体托入虚线框中");var t=this,e=[t.a0,t.a1,t.a2,t.a3,t.a4,t.a5,t.a6,t.a7,t.a8,t.a9,t.a10,t.a11,t.a12,t.a13,t.a14,t.a15,t.a16,t.a17],a=[t.bw0,t.bw1,t.bw2,t.bw3,t.bw4,t.bw5,t.bw6,t.bw7,t.bw8,t.bw9,t.bw10,t.bw11,t.bw12,t.bw13,t.bw14,t.bw15,t.bw16,t.bw17],n=[0,0,0,0],r=0,i=!1;function o(n){i=!0;var o=void 0,h=void 0;0===n?(o=0,h=5):1===n?(o=5,h=10):2===n?(o=10,h=14):3===n&&(o=14,h=18);var c=[],s=[];for(var l in e)l>=o&&l<h?c.push(e[l]):s.push(e[l]);for(var f in a)a[f].alpha=f>=o&&f<h?1:0;var u=!0,x=!1,d=void 0;try{for(var b,v=c[Symbol.iterator]();!(u=(b=v.next()).done);u=!0){var y=b.value;TweenMax.to(y,.4,{alpha:1})}}catch(t){x=!0,d=t}finally{try{!u&&v.return&&v.return()}finally{if(x)throw d}}var p=!0,w=!1,T=void 0;try{for(var m,B=s[Symbol.iterator]();!(p=(m=B.next()).done);p=!0){var g=m.value;TweenMax.to(g,.4,{alpha:0,onComplete:function(){r<3&&(t.rightTab.interactive=!0),r>0&&(t.leftTab.interactive=!0)}})}}catch(t){w=!0,T=t}finally{try{!p&&B.return&&B.return()}finally{if(w)throw T}}}t.rightTab.x+=100,t.leftTab.x-=135,function(){for(var r in t.leftTab.alpha=0,a)r>=5&&(a[r].alpha=0,e[r].alpha=0);n[0]=e[4].x-e[0].x+e[0].width/1.5+e[4].width/2,n[1]=e[9].x-e[5].x+e[9].width/1.5+e[5].width/2,n[2]=e[13].x-e[10].x+e[13].width/2+e[10].width/2,n[3]=e[17].x-e[14].x+e[17].width/2+e[14].width/2}(),t.rightTab.addEventListener(TouchEvent.TAP,function(){h.forEach(function(t){t.mask=B}),v=!1,instance.NBDownTip.hideTip(),TweenMax.to(t.leftTab,.4,{alpha:1}),t.rightTab.interactive=!1,e.forEach(function(t){TweenMax.to(t,.4,{x:"+="+n[r]})}),++r<=3&&o(r)}),t.leftTab.addEventListener(TouchEvent.TAP,function(){t.rightTab.alpha=1,t.leftTab.interactive=!1,h.forEach(function(t){t.mask=B}),--r>=0&&(t.leftTab.interactive=!1,e.forEach(function(t){TweenMax.to(t,.4,{x:"-="+n[r]})}),o(r))});var h=[t.a0,t.a1,t.a2,t.a3,t.a4,t.a5,t.a6,t.a7,t.a8,t.a9,t.a10,t.a11,t.a12,t.a13,t.a14,t.a15,t.a16,t.a17],c=[t.s0,t.s1,t.s2,t.s3,t.s4,t.s5,t.s6,t.s7,t.s8,t.s9,t.s10,t.s11,t.s12,t.s13,t.s14,t.s15,t.s16,t.s17],s=[t.b0,t.b1,t.b2,t.b3,t.b4,t.b5,t.b6,t.b7,t.b8,t.b9,t.b10,t.b11,t.b12,t.b13,t.b14,t.b15,t.b16,t.b17],l=0,f=[];function u(){h.forEach(function(t){t.mask=null}),instance.NBDownTip.hideTip(),this.startX=this.x,this.startY=this.y,t.setChildIndex(this,t.children.length-1)}function x(){var e=h.indexOf(this);this.hitTest(t.tAll)?(c[l].currentFrame=e,TweenMax.to(c[l],.4,{alpha:0})):TweenMax.to(c[l],.4,{alpha:0})}!function(){c.forEach(function(t){t.alpha=0}),s.forEach(function(t){t.alpha=0});var t=!0,e=!1,a=void 0;try{for(var n,r=c[Symbol.iterator]();!(t=(n=r.next()).done);t=!0){var i=n.value;i.interactive=!1}}catch(t){e=!0,a=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw a}}h.forEach(function(t,e){NBDrag.addDrag(t),t.addEventListener(NBDrag.event.START_DRAG,u),t.addEventListener(NBDrag.event.DRAG_MOVE,x),t.addEventListener(NBDrag.event.STOP_DRAG,p);var a={x:0,y:0};a.x=h[e].x-s[e].x,a.y=h[e].y-s[e].y,f.push(a)})}(),e.forEach(function(t,e){s[e].x=t.x-s[e].width/2,s[e].y=t.y-s[e].height/2,a[e].y+=1.5*a[e].height}),t.aaa.alpha=0;var d=h[2].x,b=h[2].y-h[2].height,v=!0,y=!0;function p(){var e=this;if(this.hitTest(t.tAll)){l++,this.alpha=0;var a=!0,n=!0,r=!1,i=void 0;try{for(var o,f=c[Symbol.iterator]();!(n=(o=f.next()).done);n=!0){var u=o.value;if(1===u.alpha&&this.hitTest(u))if("break"===function(){var n=h[u.currentFrame].clone();n.name=h[u.currentFrame].name,n.x=e.x,n.y=e.y,n.currentFrame=u.currentFrame,t.addChild(n),TweenMax.to(n,.4,{x:h[u.currentFrame].x,y:h[u.currentFrame].y,alpha:0,onComplete:function(){t.removeChild(n)}});var r=u.currentFrame;return a=!1,u.currentFrame=h.indexOf(e),TweenMax.to(h[r],.4,{alpha:1}),TweenMax.to(s[r],.4,{alpha:0,onComplete:function(){h[r].interactive=!0}}),e.x=e.startX,e.y=e.startY,TweenMax.to(e,.4,{alpha:.4}),TweenMax.to(s[h.indexOf(e)],.4,{alpha:1,onComplete:function(){e.interactive=!1}}),l--,"break"}())break}}catch(t){r=!0,i=t}finally{try{!n&&f.return&&f.return()}finally{if(r)throw i}}a&&TweenMax.to(c[l-1],.4,{alpha:1,onComplete:function(){TweenMax.to(s[h.indexOf(e)],.4,{alpha:1}),TweenMax.to(e,.4,{alpha:.4}),e.interactive=!1,v&&instance.NBDownTip.showTip("点击箭头可以切换物品种类")}});var x=t["s"+(l-1)];x.interactive=!0,NBDrag.addDrag(x);var p=void 0;x.addEventListener(NBDrag.event.START_DRAG,function(){x.startX=x.x,x.startY=x.y,t.setChildIndex(e,t.children.length-1);var a=!0,n=!1,r=void 0;try{for(var i,o=c[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var h=i.value;1===h.alpha&&(p=h)}}catch(t){n=!0,r=t}finally{try{!a&&o.return&&o.return()}finally{if(n)throw r}}p.comeBackX=p.x,p.comeBackY=p.y}),x.addEventListener(NBDrag.event.STOP_DRAG,function(){if(x.hitTest(t.tAll)){var e=!0,a=void 0,n=!0,r=!1,i=void 0;try{for(var o,l=c[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var f=o.value;if(1===f.alpha&&x.hitTest(f)&&x!=f){var u=!0,v=!1,y=void 0;try{for(var B,g=c[Symbol.iterator]();!(u=(B=g.next()).done);u=!0){B.value.interactive=!1}}catch(t){v=!0,y=t}finally{try{!u&&g.return&&g.return()}finally{if(v)throw y}}e=!1,a=f;var A=f.x,E=f.y;TweenMax.to(x,.4,{x:A,y:E}),TweenMax.to(f,.4,{x:x.startX,y:x.startY,onComplete:function(){var t=!0,e=!1,a=void 0;try{for(var n,r=c[Symbol.iterator]();!(t=(n=r.next()).done);t=!0){var i=n.value;1===i.alpha&&(i.interactive=!0)}}catch(t){e=!0,a=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw a}}}});break}}}catch(t){r=!0,i=t}finally{try{!n&&l.return&&l.return()}finally{if(r)throw i}}var M=c.indexOf(a),S=c.indexOf(x);-1!=M&&-1!=S&&(c[M]=x,c[S]=a),e&&TweenMax.to(x,.4,{x:x.startX,y:x.startY})}else{TweenMax.to(p,.4,{x:x.startX,y:x.startY}),h[x.currentFrame].x>T&&h[x.currentFrame].x<m?TweenMax.to(x,.4,{x:h[x.currentFrame].x,y:h[x.currentFrame].y}):TweenMax.to(x,.4,{x:d,y:b}),TweenMax.to(x,.4,{alpha:0,onComplete:function(){x.x=p.comeBackX,x.y=p.comeBackY;var t=!0,e=!1,a=void 0;try{for(var n,r=c[Symbol.iterator]();!(t=(n=r.next()).done);t=!0){n.value.interactive=!1}}catch(t){e=!0,a=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw a}}TweenMax.to(s[x.currentFrame],.4,{alpha:0}),h[x.currentFrame].x>T&&h[x.currentFrame].x<m?w(x,1):w(x,0)}});var F=c.indexOf(p),k=c.indexOf(x);c[F]=x,c[k]=p}}),y=!1,h.forEach(function(t){t.mask=B})}else y&&instance.NBDownTip.showTip("预测下沉物体托入虚线框中");TweenMax.to(this,.4,{x:this.startX,y:this.startY})}function w(t,e){TweenMax.to(h[t.currentFrame],.4,{alpha:e,onComplete:function(){h[t.currentFrame].interactive=!0;var e=!0,a=!1,n=void 0;try{for(var r,i=c[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;1===o.alpha&&(o.interactive=!0)}}catch(t){a=!0,n=t}finally{try{!e&&i.return&&i.return()}finally{if(a)throw n}}l--}})}var T=t.a9.x+t.a9.width/1.2,m=t.a4.x+t.a4.width/1.2,B=t.aaa.getChildAt(0);h.forEach(function(t){t.mask=B}),this.onUpdate=function(){h.forEach(function(e,n){s[n].x=e.x-f[n].x,e.hitTest(t.tAll)&&(a[n].alpha=1)}),instance.info.choiseArr=[],c.forEach(function(t){1===t.alpha&&-1===instance.info.choiseArr.indexOf(t.currentFrame)&&instance.info.choiseArr.push(t.currentFrame)}),c.forEach(function(t){1===t.alpha&&(h[t.currentFrame].x<m&&h[t.currentFrame].x>T?(s[t.currentFrame].alpha=h[t.currentFrame].alpha,.4===h[t.currentFrame].alpha&&(s[t.currentFrame].alpha=1),1===s[t.currentFrame].alpha&&(h[t.currentFrame].alpha=.4)):s[t.currentFrame].alpha=0)}),i&&(0===r&&(t.leftTab.interactive=!1,t.leftTab.alpha=0),3===r&&(t.rightTab.interactive=!1,t.rightTab.alpha=0),r<0&&(r=0),r>3&&(r=3))}},frame1:function(){var t=new nb.Box2d(this);nb.rigidBodySwitch.apply(this,[t]),instance.NBDownTip.showTip("将物体拖入水槽进行验证");var e=this;e.leftTab.alpha=0,e.centerArea.height-=6;var a=[e.a0,e.a1,e.a2,e.a3,e.a4,e.a5,e.a6,e.a7,e.a8,e.a9,e.a10,e.a11,e.a12,e.a13,e.a14,e.a15,e.a16,e.a17],n=[e.bw0,e.bw1,e.bw2,e.bw3,e.bw4,e.bw5,e.bw6,e.bw7,e.bw8,e.bw9,e.bw10,e.bw11,e.bw12,e.bw13,e.bw14,e.bw15,e.bw16,e.bw17],r=[e.b0,e.b1,e.b2,e.b3,e.b4,e.b5,e.b6,e.b7,e.b8,e.b9,e.b10,e.b11,e.b12,e.b13,e.b14,e.b15,e.b16,e.b17],i=[0,0,0,0],o=0;!function(){for(var t in n)t>=5&&(a[t].alpha=0);i[0]=a[4].x-a[0].x+a[0].width/1.5+a[4].width/2,i[1]=a[9].x-a[5].x+a[9].width/1.5+a[5].width/2,i[2]=a[13].x-a[10].x+a[13].width/2+a[10].width/2,i[3]=a[17].x-a[14].x+a[17].width/2+a[14].width/2}(),a.forEach(function(t){t.addEventListener(TouchEvent.TAP,function(){a.forEach(function(t){t.mask=null})})}),a.forEach(function(t,e){r[e].x=t.x-r[e].width/2,r[e].y=t.y-r[e].height/2,n[e].y+=1.5*n[e].height}),e.aaa.alpha=0;var h=e.aaa.getChildAt(0);function c(t){a.forEach(function(e){e.interactive=t})}a.forEach(function(t,e){t.mask=h,r[e].mask=h}),e.leftTab.x-=135,e.rightTab.x+=100,e.rightTab.addEventListener(TouchEvent.TAP,function(){c(!1),s=!1,e.leftTab.interactive=!0,e.leftTab.alpha=1,a.forEach(function(t){t.mask=h}),a.forEach(function(t,n){0===t.alpha&&(t.x-=i[o],r[n].x-=i[o]),t.hitTest(e.noMove)?TweenMax.to(t,.4,{alpha:1}):TweenMax.to([t,r[n]],.4,{x:"+="+i[o],onComplete:function(){s=!0,setTimeout(function(){a.forEach(function(t){t.mask=null,t.interactive=!0})},500)}})}),++o<=3&&l(o)}),e.noMove.alpha=0,e.leftTab.addEventListener(TouchEvent.TAP,function(){c(!1),e.rightTab.alpha=1,a.forEach(function(t){t.mask=h}),o--,console.log(o),o>=0&&(s=!1,e.leftTab.interactive=!1,a.forEach(function(t,n){0===t.alpha&&(t.x+=i[o],r[n].x+=i[o]),t.hitTest(e.noMove)||TweenMax.to([t,r[n]],.4,{x:"-="+i[o],onComplete:function(){s=!0,setTimeout(function(){a.forEach(function(t){t.mask=null,t.interactive=!0})},500)}})}),l(o))});var s=!0;function l(t){var r=void 0,i=void 0;0===t?(r=0,i=5):1===t?(r=5,i=10):2===t?(r=10,i=14):3===t&&(r=14,i=18);var h=[],c=[];for(var s in a)s>=r&&s<i&&!isNaN(s)?h.push(a[s]):isNaN(s)||c.push(a[s]);var l=!0,f=!1,u=void 0;try{for(var x,d=h[Symbol.iterator]();!(l=(x=d.next()).done);l=!0){var b=x.value;TweenMax.to(b,.4,{alpha:1})}}catch(t){f=!0,u=t}finally{try{!l&&d.return&&d.return()}finally{if(f)throw u}}var v=!0,y=!1,p=void 0;try{for(var w,T=c[Symbol.iterator]();!(v=(w=T.next()).done);v=!0){var m=w.value;m.y<e.leftTab.y+e.leftTab.height?TweenMax.to(m,.4,{alpha:0,onComplete:function(){o<3&&(e.rightTab.interactive=!0),o>0&&(e.leftTab.interactive=!0)}}):-1!==a.indexOf(m)&&TweenMax.to(n[a.indexOf(m)],.4,{alpha:0})}}catch(t){y=!0,p=t}finally{try{!v&&T.return&&T.return()}finally{if(y)throw p}}}var f=[],u=[];a.forEach(function(t,e){var n={x:0,y:0};n.x=a[e].x-r[e].x,n.y=a[e].y-r[e].y,f.push(n);var i={x:0,y:0};i.x=a[e].x,i.y=a[e].y,u.push(i)}),a.forEach(function(t){t.addEventListener("comeBackChange",function(){t.Bnum!==o&&TweenMax.to(t,.4,{x:x,y:d,alpha:0})})});var x=a[2].x,d=a[2].y+a[2].width;function b(t){r.forEach(function(e,a){-1===instance.info.choiseArr.indexOf(a)?(e.isHas=!1,t?TweenMax.to(e,.4,{alpha:0}):e.alpha=0):(e.isHas=!0,e.alpgh=1)})}this.onUpdate=function(){for(var i in t.render(),a.forEach(function(t,a){1===t.alpha&&(e.setChildIndex(t,e.children.length-1),t.interactive=!0),0===t.alpha&&(t.interactive=!1),a>=0&&a<5?t.Bnum=0:a>=5&&a<10?t.Bnum=1:a>=10&&a<14?t.Bnum=2:a>=14&&a<18&&(t.Bnum=3)}),a)s&&(r[i].x=u[i].x-f[i].x),a[i].x===u[i].x&&a[i].y===u[i].y?(n[i].alpha=a[i].alpha,r[i].isHas&&(r[i].alpha=a[i].alpha),a[i].Bnum!==o&&(a[i].alpha=0)):(a[i].Bnum===o&&TweenMax.to(n[i],.4,{alpha:1}),r[i].isHas&&a[i].Bnum===o?(a[i].alpha=1,r[i].alpha=1):r[i].alpha=0),a.forEach(function(t,a){t.hitTest(e.noMove)&&t.Bnum!==o&&(n[a].alpha=0)});0===o?(e.leftTab.interactive=!1,e.leftTab.alpha=0):e.leftTab.interactive=!0,3===o?(e.rightTab.interactive=!1,e.rightTab.alpha=0):e.rightTab.interactive=!0,o<0&&(o=0),o>3&&(o=3)},$(".steps li").click(function(){b()}),b()},start:function(){this.menu.addStepFromObj(this.info),this.menu.setExperimentName(this.info.labName),this.bindScriptToSprite(this.frame1,"frame1"),this.bindScriptToSprite(this.frame0,"frame0")},info:{experimentImport:"将相同的不同大小的物体放入水中，观察物体在水中的沉浮状态。",labName:"相同物体的沉浮",title0:"预测物体",title1:"验证物体",CONCLUSION:"不同大小的相同物体，在水中的沉浮也情况不同。",choiseArr:[]},const:{},event:{}}),nb.rigidBodySwitch=function(t){for(var e=this,a=function(a){if("begin"===a.type){e.setChildIndex(this,e.children.length-1),e.followName0&&e.setChildIndex(e["followName"+this.name.substr(1,1)],e.children.length-1),this.b2Body.SetType(t.b2Body.b2_kinematicBody),nb.Box2d.freezeBody(this.b2Body),TweenMax.killTweensOf(this),this.b2Body.GetFixtureList().SetSensor(!0);var n=this.x>e.centerArea.x-e.centerArea.width/2&&this.x<e.centerArea.x+e.centerArea.width/2&&this.y>e.centerArea.y-e.centerArea.height/2-this.height/2&&this.y<e.centerArea.y+e.centerArea.height/2;instance.NBDownTip.hideTip(),instance.NBDownTipsError.hideTip(),n?(this.startPos=!0,this.b2Body.GetFixtureList().SetSensor(!1)):this.startPos=!1}else if("move"===a.type){var r=a.offsetX/t.b2Scale,i=a.offsetY/t.b2Scale;nb.Box2d.appendPos(this,r,i)}else if("end"===a.type)if(this.hitTest(e.kinematicRect))this.b2Body.GetFixtureList().SetSensor(!1),this.b2Body.SetType(t.b2Body.b2_dynamicBody),this.emit("reachRect"),e.setChildIndex(this,0);else{if(this.x>e.centerArea.x-e.centerArea.width/2&&this.x<e.centerArea.x+e.centerArea.width/2&&this.y>e.centerArea.y-e.centerArea.height/2&&this.y<e.centerArea.y+e.centerArea.height/2&&this.startPos)return this.b2Body.GetFixtureList().SetSensor(!1),this.b2Body.SetType(t.b2Body.b2_dynamicBody),void e.setChildIndex(this,0);this.b2Body.SetType(t.b2Body.b2_kinematicBody),nb.Box2d.freezeBody(this.b2Body),this.emit("comeBackChange");var o=this,h=TweenMax.to(this,.5,{onUpdate:function(t,e,a,n){var r=h.ratio;nb.Box2d.updatePos(t,e+(t.b2Dx-e)*r,a+(t.b2Dy-a)*r,n+(0-n)*r)},onUpdateParams:[this,this.x/t.b2Scale,this.y/t.b2Scale,this.rotation],ease:Back.easeOut,onComplete:function(){o.emit("noReach_comeBack")}});e.centerArea&&(e.centerArea.visible=!0,this.x>e.centerArea.x-e.centerArea.width/2-this.width/2&&this.x<e.centerArea.x+e.centerArea.width/2+this.width/2&&this.y>e.centerArea.y-e.centerArea.height/2-this.height/2&&this.y<e.centerArea.y+e.centerArea.height/2+this.height/2?instance.NBDownTipsError.showTip("请从水槽上方放入物体"):instance.NBDownTip.showTip("请从水槽上方放入物体"))}},n=0;n<int.MAX_VALUE;n++){var r=this["a"+n];if(void 0===r)break;NBGesture.addGesture(r,NBGesture.gesture.PAN,a);var i=r.b2Body.GetPosition();r.b2Dx=i.x,r.b2Dy=i.y}},t.exports=nb.substance0066}});