webpackJsonp([82],{368:function(e,t,a){"use strict";var n=r(a(521)),i=r(a(527));function r(e){return e&&e.__esModule?e:{default:e}}nb.substance0185=extendsClass(ScienceMain,{frame0:function(){var e=this;n.default.apply(e),instance.viewStack.NBONOFF.visible=!1;for(var t=0,a=[{x1:674,x2:722,y1:317,y2:388},{x1:654,x2:700,y1:380,y2:443},{x1:681,x2:762,y1:282,y2:479},{x1:518,x2:651,y1:282,y2:479}],r=0;r<3;r++){var s=e["step"+r];s.idx=r,s.scrb.alpha=s.detail.alpha=s.w0.ani.alpha=0,s.w0.ani.loop=!1,2==r&&(s.w0.ani1.alpha=s.detail1.alpha=0,s.w0.ani1.loop=!1),s.bottom.mask=s.glassMask.children[0],i.default.apply(s,[s.glass,{littlePng:"a",bigPng:"w",tipOffsetX:-140,tipOffsetY:100,iconOffsetX:-155,iconOffsetY:100}]),s.glass.addEventListener(NBDrag.event.DRAG_MOVE,function(){var a=e["step"+t];o(a,a.glass)})}function o(t,n){t.idx<=1?n.x>a[t.idx].x1&&n.x<a[t.idx].x2&&n.y>a[t.idx].y1&&n.y<a[t.idx].y2?(t.detail.alpha=t.w0.ani.alpha=t.scrb.alpha=1,e.tip.alpha=0,t.w0.ani.play()):(t.detail.alpha=t.w0.ani.alpha=t.scrb.alpha=0,e.tip.alpha=1,t.w0.ani.currentFrame=0):(n.x>a[2].x1&&n.x<a[2].x2&&n.y>a[2].y1&&n.y<a[2].y2?(t.detail.alpha=t.w0.ani.alpha=1,t.w0.ani.play(),t.detail1.alpha=t.w0.ani1.alpha=t.w0.ani1.currentFrame=0):n.x>a[3].x1&&n.x<a[3].x2&&n.y>a[3].y1&&n.y<a[3].y2?(t.detail1.alpha=t.w0.ani1.alpha=1,t.w0.ani1.play(),t.detail.alpha=t.w0.ani.alpha=t.w0.ani.currentFrame=0):(t.detail1.alpha=t.w0.ani1.alpha=t.detail.alpha=t.w0.ani.alpha=0,t.w0.ani1.currentFrame=t.w0.ani.currentFrame=0),n.x>a[3].x1&&n.x<a[2].x2&&n.y>a[2].y1&&n.y<a[2].y2?(t.scrb.alpha=1,e.tip.alpha=0):(t.scrb.alpha=0,e.tip.alpha=1))}e.timeline.addEventListener("nodeTap",function(){e.tip.alpha=0;for(var t=0;t<3;t++)e["step"+t].scrb.alpha=0}),e.timeline.addEventListener("nodeTapReached",function(a){t=a.index;var n=e["step"+t];o(n,n.glass)})},start:function(){this.menu.addStepFromObj(this.info),this.menu.setExperimentName(this.info.labName),this.bindScriptToSprite(this.frame0,"frame0")},info:{experimentImport:"肉眼观察和放大镜观察到底有什么不同？放大镜还能发现什么？",labName:"昆虫的奇特世界",CONCLUSION:'苍蝇有4000个复眼。<br/> 蟋蟀的"耳朵"在足的内侧。<br/> 蝴蝶的翅膀上布满彩色扁平的细毛。',newLayOut:!0,bgColor:"#F3E6CF"},const:{MAX_SCALE:1.6,MIN_SCALE:.82,START_BLUR:.5,BLUR:7.8},event:{}}),e.exports=nb.substance0185},520:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={event:{CLICK_NODE:"nodeTap",CLICK_NODE_REACHED:"nodeTapReached",ON_COMPLETE:"timelineComplete",ON_PLAY:"timelinePlaying",REACHED_NODE:"reachedNode",START_DRAG:"startDrag",DRAGING:"draging",STOP_DRAG:"stopDrag"},init:function(){var e,t,a=this;if(a.bgMask){var i=a.bgMask.getChildAt(0);a.progressBar.mask=i,i.scale.x=0}var r=this.a0.x===this.a1.x?"vertical":"horizontal",s=0,o=[];a.drag.lastPos={x:a.drag.x,y:a.drag.y};for(var l=0;l<int.MAX_VALUE;l++){var d=this["a"+l];if(void 0===d){t="vertical"===r?this["a"+(l-1)].y:this["a"+(l-1)].x,s=l;break}o.push(d),0===l&&(e="vertical"===r?d.y:d.x),d.addEventListener(TouchEvent.TAP,function(){var e=this;"vertical"===r?TweenMax.to(a.drag,.5,{y:this.y}):TweenMax.to(a.drag,.5,{x:this.x,onComplete:function(){a.emit(n.event.CLICK_NODE_REACHED,{index:e.name.substr(1,1)})}}),this.totalFrames&&(o.forEach(function(e){return e.currentFrame=0}),this.currentFrame=1),a.drag.lastPos={x:this.x,y:this.y},a.emit(n.event.CLICK_NODE,{index:this.name.substr(1,1)})})}this.setDrag=function(i){i?(NBDrag.addDrag(a.drag),a.drag.on(NBDrag.event.START_DRAG,function(){var i=(a.drag.x-e)/(t-e);a.emit(n.event.START_DRAG,{time:i})}),a.drag.on(NBDrag.event.DRAG_MOVE,function(){var i=(a.drag.x-e)/(t-e);a.emit(n.event.DRAGING,{time:i})}),a.drag.on(NBDrag.event.STOP_DRAG,function(){var i=(a.drag.x-e)/(t-e);a.emit(n.event.STOP_DRAG,{time:i}),i>=1&&a.emit(n.event.ON_COMPLETE,{time:i})})):NBDrag.removeDrag(a.drag)},a.drag.addEventListener(NBDrag.event.STOP_DRAG,function(){if(!1!==a._align_){var n=s-1;if("vertical"===r){var i=Math.round((this.y-e)/(t-e)*n);i<0&&(i=0)}else{var o=Math.round((this.x-e)/(t-e)*n);o<0&&(o=0)}}}),a.drag.addEventListener(NBDrag.event.DRAG_MOVE,function(){x()});var c=!1;a.drag.constY=a.drag.y;var u,x=function(){a.drag.y=a.drag.constY,a.drag.x>=t&&(a.drag.x=t),a.drag.x<=e&&(a.drag.x=e);var i=(a.drag.x-e)/(t-e);if(i<1){c=!1,a.emit(n.event.ON_PLAY,{time:i});for(var r=0;r<o.length;r++)a.drag.lastPos.x<=o[r].x&&a.drag.x>o[r].x&&a.emit(n.event.REACHED_NODE,{index:r})}else c||(c=!0,a.emit(n.event.ON_COMPLETE,{time:i}));(a.drag.line0&&(a.drag.line0.rotation=1800*i*Math.PI/180,a.drag.line1.rotation=360*i*Math.PI/180),a.bgMask)&&(a.bgMask.getChildAt(0).scale.x=i);a.drag.lastPos={x:a.drag.x,y:a.drag.y}};this.getNodeCount=function(){return s},this.setNodePos=function(e){var t=this["a"+e];"vertical"===r?a.drag.y=t.y:a.drag.x=t.x},nb.MovieClip.ticker.add(function(){a._auto_&&!a.drag.isDragging&&("vertical"===r?a.drag.y+=a._speed_:a.drag.x+=a._speed_,x())}),this.setAutoPlay=function(e,t){this._auto_=e,this._speed_=t||.1},this.setAutoAlign=function(e){this._align_=e},this.setMomentsPause=function(e,t,n){clearTimeout(u),e&&!a.NOTafterStopPlay?(a.setAutoPlay(!1),clearTimeout(u),a.setAutoPlay(!1),u=setTimeout(function(){a.setAutoPlay(!0,n)},t)):a.setAutoPlay(!1)},this.resetTimeline=function(){(this.drag.x=this.bgMask.x,a.bgMask)&&(a.bgMask.getChildAt(0).scale.x=0)}}};t.default=n},521:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e=e||{};var t=this,a=[];n.default.init.apply(this.timeline);for(var i=0;i<this.timeline.getNodeCount();i++){var r=this["step"+i];a.push(r),r.alpha=0,r.visible=!1}var s=this.step0;s.visible=!0,s.alpha=1;var o=0;this.timeline.on(n.default.event.CLICK_NODE,function(n){if(void 0!==n.index&&n.index!=o){var i=e.offset||1200;i=n.index>o?$s(i):-$s(i);var r=void 0!==s.currentX?s.currentX:s.currentX=s.x;TweenMax.to(s,e.oldTm||.6,{x:r+i,alpha:0,onComplete:function(t){t.visible=!1,e.isFix||(t.y=0)},onCompleteParams:[s],ease:Expo.easeOut}),o=n.index,(s=a[o]).visible=!0,r=void 0!==s.currentX?s.currentX:s.currentX=s.x,s.x=r-i,TweenMax.to(s,e.newTm||1,{x:r,alpha:1,ease:Expo.easeOut,onComplete:function(){t.emit(t.boxSwitch_event.CHANGE_COM,{target:s,index:n.index})}})}}),this.addEventListener("render",function(){s.onUpdate&&s.onUpdate()}),t.boxSwitch_event={CHANGE_COM:"changeCom"}};var n=function(e){return e&&e.__esModule?e:{default:e}}(a(520))},527:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=this,n=e,i=Object.assign({},{littlePng:"lPng",bigPng:"bPng",MAX_SCALE:1.6,MIN_SCALE:.82,START_BLUR:.5,BLUR:7.8,tipOffsetX:0,tipOffsetY:0,iconOffsetX:0,iconOffsetY:0,slideY:70},t),r=n.tipIcon,s=n.littleTip;r.y=-206+i.iconOffsetY,r.x=289+i.iconOffsetX,s.x=257+i.tipOffsetX,s.y=-100+i.tipOffsetY,r.startPos={x:r.x,y:r.y},s.startPos={x:s.x,y:s.y},s.alpha=0,NBDrag.addDrag(n);var o=TweenMax.to(r.scale,.5,{x:1.2,y:1.2,repeat:-1,yoyo:!0});n.addEventListener(NBDrag.event.START_DRAG,d),n.addEventListener(NBDrag.event.DRAG_MOVE,y);var l=!1;function d(e){n.tapPoint&&e&&n.removeChild(n.tapPoint),TweenMax.killTweensOf(s),s.alpha&&TweenMax.to(s,.5,{y:s.startPos.y,ease:Power2.easeOut,alpha:0,onComplete:function(){}}),TweenMax.to(s,.5,{onComplete:function(){l=!1}})}r.addEventListener(TouchEvent.TAP,function(){l||(l=!0,o.pause(),s.alpha||(TweenMax.killTweensOf(s),TweenMax.to(s,.5,{y:s.startPos.y-i.slideY,ease:Power2.easeOut,alpha:1,onStart:function(){s.y=s.startPos.y,l=!1}})))}),$("canvas").click(function(){l||(l=!0,d())});var c=new PIXI.Graphics;a.addChild(c),a.graphics=c,c.beginFill(0,255,1),c.drawCircle(0,0,a.bottom.width/2);for(var u=[],x=[],h=[],v=0;v<int.MAX_VALUE&&a[i.bigPng+v];v++){var f,p=a[i.bigPng+v],g=a[i.littlePng+v];x.push(p),h.push(g),p.mask=c,p.alpha=1,f=p.width/g.width,u.push(f)}function y(){c.x=n.x,c.y=n.y,a.bottom.position=c.position,h.forEach(function(e,t){var r=a[i.bigPng+t];r.x=-(u[t]-1)*(n.x-e.x)+e.x,r.y=-(u[t]-1)*(n.y-e.y)+e.y})}var E=new PIXI.filters.BlurFilter;function _(e){E.blur=5.46*e-4.4784,E.blur<=0&&(E.blur=0)}function m(e){var t=a.toLocal({x:e.data.global.x,y:e.data.global.y});if(n.glassCenterPoint&&n.removeChild(n.glassCenterPoint),n.arrow.alpha=0,n.slide=!0,instance.NBDownTip.hideTip(),t.x<T){var i=T-t.x;A=b+i/1e3,C=w+i/1e3/2,(M=O+i/1e3)>instance.const.MAX_SCALE&&(M=instance.const.MAX_SCALE),C>instance.const.MAX_SCALE-.5&&(C=instance.const.MAX_SCALE-.5),A>instance.const.MAX_SCALE&&(A=instance.const.MAX_SCALE),_(M),TweenMax.to(n.scale,.5,{x:M,y:A}),TweenMax.to(c.scale,.5,{x:M,y:A}),TweenMax.to(a.bottom.scale,.5,{x:M,y:A}),x.forEach(function(e){TweenMax.to(e.scale,.5,{x:C,y:C}),e.filters=[E]})}if(t.x>T){var r=t.x-T;A=b-r/1e3,C=w-r/1e3/2,(M=O-r/1e3)<instance.const.MIN_SCALE&&(M=instance.const.MIN_SCALE),C<instance.const.MIN_SCALE&&(C=instance.const.MIN_SCALE),A<instance.const.MIN_SCALE&&(A=instance.const.MIN_SCALE),_(M),TweenMax.to(n.scale,.5,{x:M,y:A}),TweenMax.to(c.scale,.5,{x:M,y:A}),TweenMax.to(a.bottom.scale,.5,{x:M,y:A}),x.forEach(function(e){TweenMax.to(e.scale,.5,{x:C,y:C})})}}if(_(1),c){var T,C,M=0,A=0,O=1,b=1,w=1;c.addEventListener(TouchEvent.TOUCH_BEGIN,function(){c.addEventListener(TouchEvent.TOUCH_MOVE,m)}),c.addEventListener(TouchEvent.TOUCH_END,function(){0!=M&&(O=M,b=A,w=C),a.addChild(c),c.removeListener(TouchEvent.TOUCH_MOVE,m)}),c.addEventListener(TouchEvent.TOUCH_END_OUDSIDE,function(){0!=M&&(O=M,b=A,w=C),a.addChild(c),c.removeListener(TouchEvent.TOUCH_MOVE,m)}),c.addEventListener(TouchEvent.TOUCH_BEGIN,function(e){var t=a.toLocal({x:e.data.global.x,y:e.data.global.y});T=t.x,c.addEventListener(TouchEvent.TOUCH_MOVE,m)})}n.addEventListener("canSlide",function(){c.interactive=!0}),n.addEventListener("noSlide",function(){c.interactive=!1}),c.interactive=!1,y(),n.event={grpInteractive:"canSlide",grpNoInteractive:"noSlide"}}}});