webpackJsonp([81],{397:function(e,t,n){"use strict";var a=s(n(521)),i=s(n(527));function s(e){return e&&e.__esModule?e:{default:e}}nb.substance0570=extendsClass(ScienceMain,{frame0:function(){a.default.apply(this),instance.viewStack.NBONOFF.visible=!1;for(var e=0;e<3;e++){var t=this["step"+e];t.bottom.mask=t.glassMask.children[0],i.default.apply(t,[t.glass,{littlePng:"sPng",bigPng:"bigPng",tipOffsetX:-140,tipOffsetY:100,iconOffsetX:-155,iconOffsetY:100}])}},start:function(){this.menu.addStepFromObj(this.info),this.menu.setExperimentName(this.info.labName),this.bindScriptToSprite(this.frame0,"frame0")},info:{experimentImport:"你知道盐、糖、味精这三种物质的小颗粒分别是什么形状吗？",labName:"放大镜下的晶体",CONCLUSION:"借助放大镜，我们可以观察到，食盐和白糖都是立方体状的颗粒，味精是柱状的颗粒。",newLayOut:!0,bgColor:"#F3E6CF"},const:{},event:{}}),e.exports=nb.substance0570},520:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={event:{CLICK_NODE:"nodeTap",CLICK_NODE_REACHED:"nodeTapReached",ON_COMPLETE:"timelineComplete",ON_PLAY:"timelinePlaying",REACHED_NODE:"reachedNode",START_DRAG:"startDrag",DRAGING:"draging",STOP_DRAG:"stopDrag"},init:function(){var e,t,n=this;if(n.bgMask){var i=n.bgMask.getChildAt(0);n.progressBar.mask=i,i.scale.x=0}var s=this.a0.x===this.a1.x?"vertical":"horizontal",o=0,r=[];n.drag.lastPos={x:n.drag.x,y:n.drag.y};for(var c=0;c<int.MAX_VALUE;c++){var d=this["a"+c];if(void 0===d){t="vertical"===s?this["a"+(c-1)].y:this["a"+(c-1)].x,o=c;break}r.push(d),0===c&&(e="vertical"===s?d.y:d.x),d.addEventListener(TouchEvent.TAP,function(){var e=this;"vertical"===s?TweenMax.to(n.drag,.5,{y:this.y}):TweenMax.to(n.drag,.5,{x:this.x,onComplete:function(){n.emit(a.event.CLICK_NODE_REACHED,{index:e.name.substr(1,1)})}}),this.totalFrames&&(r.forEach(function(e){return e.currentFrame=0}),this.currentFrame=1),n.drag.lastPos={x:this.x,y:this.y},n.emit(a.event.CLICK_NODE,{index:this.name.substr(1,1)})})}this.setDrag=function(i){i?(NBDrag.addDrag(n.drag),n.drag.on(NBDrag.event.START_DRAG,function(){var i=(n.drag.x-e)/(t-e);n.emit(a.event.START_DRAG,{time:i})}),n.drag.on(NBDrag.event.DRAG_MOVE,function(){var i=(n.drag.x-e)/(t-e);n.emit(a.event.DRAGING,{time:i})}),n.drag.on(NBDrag.event.STOP_DRAG,function(){var i=(n.drag.x-e)/(t-e);n.emit(a.event.STOP_DRAG,{time:i}),i>=1&&n.emit(a.event.ON_COMPLETE,{time:i})})):NBDrag.removeDrag(n.drag)},n.drag.addEventListener(NBDrag.event.STOP_DRAG,function(){if(!1!==n._align_){var a=o-1;if("vertical"===s){var i=Math.round((this.y-e)/(t-e)*a);i<0&&(i=0)}else{var r=Math.round((this.x-e)/(t-e)*a);r<0&&(r=0)}}}),n.drag.addEventListener(NBDrag.event.DRAG_MOVE,function(){v()});var l=!1;n.drag.constY=n.drag.y;var u,v=function(){n.drag.y=n.drag.constY,n.drag.x>=t&&(n.drag.x=t),n.drag.x<=e&&(n.drag.x=e);var i=(n.drag.x-e)/(t-e);if(i<1){l=!1,n.emit(a.event.ON_PLAY,{time:i});for(var s=0;s<r.length;s++)n.drag.lastPos.x<=r[s].x&&n.drag.x>r[s].x&&n.emit(a.event.REACHED_NODE,{index:s})}else l||(l=!0,n.emit(a.event.ON_COMPLETE,{time:i}));(n.drag.line0&&(n.drag.line0.rotation=1800*i*Math.PI/180,n.drag.line1.rotation=360*i*Math.PI/180),n.bgMask)&&(n.bgMask.getChildAt(0).scale.x=i);n.drag.lastPos={x:n.drag.x,y:n.drag.y}};this.getNodeCount=function(){return o},this.setNodePos=function(e){var t=this["a"+e];"vertical"===s?n.drag.y=t.y:n.drag.x=t.x},nb.MovieClip.ticker.add(function(){n._auto_&&!n.drag.isDragging&&("vertical"===s?n.drag.y+=n._speed_:n.drag.x+=n._speed_,v())}),this.setAutoPlay=function(e,t){this._auto_=e,this._speed_=t||.1},this.setAutoAlign=function(e){this._align_=e},this.setMomentsPause=function(e,t,a){clearTimeout(u),e&&!n.NOTafterStopPlay?(n.setAutoPlay(!1),clearTimeout(u),n.setAutoPlay(!1),u=setTimeout(function(){n.setAutoPlay(!0,a)},t)):n.setAutoPlay(!1)},this.resetTimeline=function(){(this.drag.x=this.bgMask.x,n.bgMask)&&(n.bgMask.getChildAt(0).scale.x=0)}}};t.default=a},521:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e=e||{};var t=this,n=[];a.default.init.apply(this.timeline);for(var i=0;i<this.timeline.getNodeCount();i++){var s=this["step"+i];n.push(s),s.alpha=0,s.visible=!1}var o=this.step0;o.visible=!0,o.alpha=1;var r=0;this.timeline.on(a.default.event.CLICK_NODE,function(a){if(void 0!==a.index&&a.index!=r){var i=e.offset||1200;i=a.index>r?$s(i):-$s(i);var s=void 0!==o.currentX?o.currentX:o.currentX=o.x;TweenMax.to(o,e.oldTm||.6,{x:s+i,alpha:0,onComplete:function(t){t.visible=!1,e.isFix||(t.y=0)},onCompleteParams:[o],ease:Expo.easeOut}),r=a.index,(o=n[r]).visible=!0,s=void 0!==o.currentX?o.currentX:o.currentX=o.x,o.x=s-i,TweenMax.to(o,e.newTm||1,{x:s,alpha:1,ease:Expo.easeOut,onComplete:function(){t.emit(t.boxSwitch_event.CHANGE_COM,{target:o,index:a.index})}})}}),this.addEventListener("render",function(){o.onUpdate&&o.onUpdate()}),t.boxSwitch_event={CHANGE_COM:"changeCom"}};var a=function(e){return e&&e.__esModule?e:{default:e}}(n(520))},527:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=this,a=e,i=Object.assign({},{littlePng:"lPng",bigPng:"bPng",MAX_SCALE:1.6,MIN_SCALE:.82,START_BLUR:.5,BLUR:7.8,tipOffsetX:0,tipOffsetY:0,iconOffsetX:0,iconOffsetY:0,slideY:70},t),s=a.tipIcon,o=a.littleTip;s.y=-206+i.iconOffsetY,s.x=289+i.iconOffsetX,o.x=257+i.tipOffsetX,o.y=-100+i.tipOffsetY,s.startPos={x:s.x,y:s.y},o.startPos={x:o.x,y:o.y},o.alpha=0,NBDrag.addDrag(a);var r=TweenMax.to(s.scale,.5,{x:1.2,y:1.2,repeat:-1,yoyo:!0});a.addEventListener(NBDrag.event.START_DRAG,d),a.addEventListener(NBDrag.event.DRAG_MOVE,_);var c=!1;function d(e){a.tapPoint&&e&&a.removeChild(a.tapPoint),TweenMax.killTweensOf(o),o.alpha&&TweenMax.to(o,.5,{y:o.startPos.y,ease:Power2.easeOut,alpha:0,onComplete:function(){}}),TweenMax.to(o,.5,{onComplete:function(){c=!1}})}s.addEventListener(TouchEvent.TAP,function(){c||(c=!0,r.pause(),o.alpha||(TweenMax.killTweensOf(o),TweenMax.to(o,.5,{y:o.startPos.y-i.slideY,ease:Power2.easeOut,alpha:1,onStart:function(){o.y=o.startPos.y,c=!1}})))}),$("canvas").click(function(){c||(c=!0,d())});var l=new PIXI.Graphics;n.addChild(l),n.graphics=l,l.beginFill(0,255,1),l.drawCircle(0,0,n.bottom.width/2);for(var u=[],v=[],f=[],g=0;g<int.MAX_VALUE&&n[i.bigPng+g];g++){var x,h=n[i.bigPng+g],E=n[i.littlePng+g];v.push(h),f.push(E),h.mask=l,h.alpha=1,x=h.width/E.width,u.push(x)}function _(){l.x=a.x,l.y=a.y,n.bottom.position=l.position,f.forEach(function(e,t){var s=n[i.bigPng+t];s.x=-(u[t]-1)*(a.x-e.x)+e.x,s.y=-(u[t]-1)*(a.y-e.y)+e.y})}var p=new PIXI.filters.BlurFilter;function C(e){p.blur=5.46*e-4.4784,p.blur<=0&&(p.blur=0)}function T(e){var t=n.toLocal({x:e.data.global.x,y:e.data.global.y});if(a.glassCenterPoint&&a.removeChild(a.glassCenterPoint),a.arrow.alpha=0,a.slide=!0,instance.NBDownTip.hideTip(),t.x<m){var i=m-t.x;y=P+i/1e3,M=b+i/1e3/2,(O=A+i/1e3)>instance.const.MAX_SCALE&&(O=instance.const.MAX_SCALE),M>instance.const.MAX_SCALE-.5&&(M=instance.const.MAX_SCALE-.5),y>instance.const.MAX_SCALE&&(y=instance.const.MAX_SCALE),C(O),TweenMax.to(a.scale,.5,{x:O,y:y}),TweenMax.to(l.scale,.5,{x:O,y:y}),TweenMax.to(n.bottom.scale,.5,{x:O,y:y}),v.forEach(function(e){TweenMax.to(e.scale,.5,{x:M,y:M}),e.filters=[p]})}if(t.x>m){var s=t.x-m;y=P-s/1e3,M=b-s/1e3/2,(O=A-s/1e3)<instance.const.MIN_SCALE&&(O=instance.const.MIN_SCALE),M<instance.const.MIN_SCALE&&(M=instance.const.MIN_SCALE),y<instance.const.MIN_SCALE&&(y=instance.const.MIN_SCALE),C(O),TweenMax.to(a.scale,.5,{x:O,y:y}),TweenMax.to(l.scale,.5,{x:O,y:y}),TweenMax.to(n.bottom.scale,.5,{x:O,y:y}),v.forEach(function(e){TweenMax.to(e.scale,.5,{x:M,y:M})})}}if(C(1),l){var m,M,O=0,y=0,A=1,P=1,b=1;l.addEventListener(TouchEvent.TOUCH_BEGIN,function(){l.addEventListener(TouchEvent.TOUCH_MOVE,T)}),l.addEventListener(TouchEvent.TOUCH_END,function(){0!=O&&(A=O,P=y,b=M),n.addChild(l),l.removeListener(TouchEvent.TOUCH_MOVE,T)}),l.addEventListener(TouchEvent.TOUCH_END_OUDSIDE,function(){0!=O&&(A=O,P=y,b=M),n.addChild(l),l.removeListener(TouchEvent.TOUCH_MOVE,T)}),l.addEventListener(TouchEvent.TOUCH_BEGIN,function(e){var t=n.toLocal({x:e.data.global.x,y:e.data.global.y});m=t.x,l.addEventListener(TouchEvent.TOUCH_MOVE,T)})}a.addEventListener("canSlide",function(){l.interactive=!0}),a.addEventListener("noSlide",function(){l.interactive=!1}),l.interactive=!1,_(),a.event={grpInteractive:"canSlide",grpNoInteractive:"noSlide"}}}});